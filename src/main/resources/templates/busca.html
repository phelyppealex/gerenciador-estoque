<!DOCTYPE html>
<html lang="pt-br" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeLeaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeLeaf/Layout">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <link rel="shortcut icon" type="image/x-icon" href="/imagens/favicon.ico">
        <link rel="stylesheet" href="/css/inicioCss.css">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css" integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">

        <title>Busca - RFP</title>
    </head>
    <body>
        
        <nav>
			<div class="usuario" th:if="${pessoa} != null">
				<img src="/imagens/perfil_anonimo.jpg" alt="">
				<label th:text="${pessoa.nome}"></label>
                <a href="/usuario/logoff">Sair</a>
			</div>
			
            <div class="ul">
                <a href="/"><div class="li"><i class="fas fa-home"></i> <span>Início</span> </div></a>
				<a href="/produto/cadastro"><div class="li"><i class="fas fa-address-card"></i> <span>Cadastro</span> </div></a>
				<a href="/produto/mensagem"><div class="li"><i class="fas fa-edit"></i> <span>Editar produto</span> </div></a>
				<a href="/produto/busca"><div class="li  selected"><i class="fas fa-search"></i> <span>Buscar</span> </div></a>
				<a href="/produto/estoque"><div class="li"><i class="fas fa-layer-group"></i> <span>Estoque</span> </div></a>
            </div>
        </nav>

		<header>
	        <a href="/">
				<img src="/imagens/logo.png" alt="Logo RFP">
				<label>
					RAIZ FAST PLAY
				</label> 	
			</a>

			<div th:if="${pessoa} == null">
                <a href="/usuario/paginadecadastro" class="btnHeader btnCadastro">CADASTRE-SE</a>
                <a href="/usuario/paginadelogin" class="btnHeader btnLogin">ENTRAR</a>
            </div>
        </header>
        
        <div class="bloco">
        	<h1>BUSCAR PRODUTOS</h1>
        	<hr>
        	
        	<div th:if="${msgSucesso} != null">
				<span th:text="${msgSucesso}" style="color: rgb(0, 163, 0); font-family: sans-serif; font-weight: bold;"></span>
				<br><br>
			</div>

			<div th:if="${msgErro} != null">
				<span th:text="${msgErro}" style="color: red; font-family: sans-serif; font-weight: bold;"></span>
				<br><br>
			</div>
        	
        	<form th:action="@{/produto/buscar}" method="get">
                <ul>
					<li><h4>Descrição</h4></li>
					<li><input type="text" th:name="descricao" placeholder="Ex.: Galaxy S9, TV Samsung 40''"></li>
					
					<li>
						<input type="checkbox" th:name="mostrarTodosDados" th:value="true"/>
						Exibir todos os dados
					</li>
					
					<li>
						<input type="submit" value="Buscar" class="go">
						<input type="submit" value="Cancelar" formaction="/" formmethod="get" class="cancel">
					</li>
				</ul>
            </form>
            
            <div th:if="${produtosEncontrados} != null">
            	<table style="margin-top: 30px;">
					<tr>
						<td colspan="4" style="text-align: center; font-weight: bold;">TABELA DE PRODUTOS ENCONTRADOS</td>
					</tr>
            		<tr>
            			<th>ID</th>
            			<th>Descrição</th>
            			<th th:if="${mostrarTodosDados} == true">Categoria</th>
            			<th>Opções</th>
            		</tr>
            		<tr th:each="u : ${produtosEncontrados}">
						<td th:text="${u.id}"></td>
						<td th:text="${u.descricao}"></td>
						<td th:if="${mostrarTodosDados} == true" th:text="${u.categoria}"></td>
						<td>
							<a th:href="'/produto/editar/' + ${u.id}">
								<i class="fas fa-edit"></i>
							</a>
							<a th:href="'/produto/remover/' + ${u.id}" onclick="if(!confirm('Você quer realmente remover o produto?')) return false;">
								<i class="fas fa-trash-alt"></i>
							</a>
						</td>
					</tr>
            	</table>
            </div>
            
        </div>

    </body>
</html>